<section class="header">
  <header>
    <h1><%= @experiment.name %></h1>
    <h2>Experiment results</h2>
  </header>
</section>


<section class="experiment">
  <nav class="nav">
    <ul>
      <li><a>Variants</a></li>
      <li><a>Graph</a></li>
    </ul>
  </nav>

  <article>
    <article class="container">
      <h3>Variants:</h3>

      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Conversions / Visitors</th>
            <th>Conversion rate</th>
            <th>Probability</th>
            <th>Improvement</th>
          </tr>
        </thead>

        <% @variants.each do |variant| %>
          <tr>
            <td class="name"><%= variant.control? ? 'Control' : variant.name %></td>
            <td class="overall"><%= variant.completed_count %> / <%= variant.started_count %></td>
            <td class="rate"><%= variant.percent_conversion_rate %></td>
            <td class="probability"><%= variant.probability %></td>
            <td class="difference"><%= variant.percent_difference %></td>
          </tr>
        <% end %>
      </table>
    </article>

    <div>
      <article class="container">
        <h3>Conversion over time:</h3>

        <div class="graph"></div>
      </article>
    </div>
  </article>
</section>

<script type="text/javascript" charset="utf-8">
  jQuery(function($){
    var Graph = require('admin/graph');
    var graph = new Graph({el: $('.graph')});
    graph.render(<%== @variant_graph.to_json %>);
  });
</script>